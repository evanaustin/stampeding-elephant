!function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a(1)},function(t,e,a){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t){return t.attributes&&(t.attributes["data-tab"]={type:"string",default:""},t.attributes["data-tab-index"]={type:"number"},t.attributes["data-tab-color"]={type:"string"}),t}function c(t){return t.attributes&&(t.attributes["data-tab"]={type:"string",default:""},t.attributes["data-tab-index"]={type:"number"}),t}var l=a(2),s=(a.n(l),a(3)),d=(a.n(s),function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}()),__=wp.i18n.__,u=wp.element,b=u.Component,p=(u.Fragment,wp.blocks),m=p.registerBlockType,v=p.createBlock,f=wp.hooks.addFilter,k=wp.components,y=(k.PanelBody,k.RangeControl,k.TextControl,wp.blockEditor),g=y.InnerBlocks,h=y.RichText,T=(y.ColorPalette,y.InspectorControls,wp.data),C=T.select,x=T.dispatch,w=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),d(e,[{key:"componentDidMount",value:function(){this.dispatchChildren()}},{key:"saveArrayUpdate",value:function(t,e){var a=[].concat(n(this.props.attributes.tabs)),r=a[e];for(var o in t)t.hasOwnProperty(o)&&(r[o]=t[o]);a[e]=r,this.props.setAttributes({tabs:a})}},{key:"dispatchChildren",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==t&&(t=this.props.attributes.tabs[0]),null==e&&(e=0),this.saveArrayUpdate({isActive:!0},e),C("core/block-editor").getBlocksByClientId(this.props.clientId)[0].innerBlocks.forEach(function(e){e.attributes.tabName===t.text&&x("core/block-editor").updateBlockAttributes(e.clientId,{isActive:!0})})}},{key:"deactivateTab",value:function(){var t=document.querySelector(".tab-title-text.active"),e=t.getAttribute("data-tab-index"),a=C("core/block-editor").getBlocksByClientId(this.props.clientId)[0].innerBlocks;this.saveArrayUpdate({isActive:!1},parseInt(e)),a.forEach(function(t){x("core/block-editor").updateBlockAttributes(t.clientId,{isActive:!1})})}},{key:"handleTabClick",value:function(t,e){this.props.setAttributes({dataTabActive:t.text}),null!==document.querySelector(".tab-title-text.active")&&this.deactivateTab(),this.dispatchChildren(t,e)}},{key:"handleTabTextChange",value:function(t,e){var a=C("core/block-editor").getBlocksByClientId(clientId)[0].innerBlocks[e];this.saveArrayUpdate({text:t,dataTab:t},e),x("core/block-editor").updateBlockAttributes(a.clientId,{tabName:t})}},{key:"moveLeft",value:function(t,e){var a=[].concat(n(tabs));a.splice(e,1),a.splice(e-1,0,t),this.props.setAttributes({tabs:a})}},{key:"moveRight",value:function(t,e){var a=[].concat(n(tabs));a.splice(e,1),a.splice(e+1,0,t),this.props.setAttributes({tabs:a})}},{key:"deleteTab",value:function(t){var e=C("core/block-editor").getBlocksByClientId(clientId)[0].innerBlocks[t],a=[].concat(n(tabs));a.splice(t,1),this.props.setAttributes({tabs:a}),x("core/block-editor").removeBlock(e.clientId)}},{key:"addTab",value:function(){var t=[].concat(n(tabs)),e="Tab "+(t.length+1);t.push({text:e,anchor:"",isActive:!1,dataTab:e}),this.props.setAttributes({tabs:t});var a=t.length-1;x("core/block-editor").insertBlock(v("lu/block-tab-child",{content:e,tabName:e,tabIndex:a,isActive:!1}),a,clientId)}},{key:"render",value:function(){var t=this,e=this.props,a=e.setAttributes,n=e.attributes,r=(e.clientId,n.tabs),o=n.dataTabActive,i=n.activeColor,c=(n.contentBackgroundColor,n.verticalPadding,n.sectionID),l=[["lu/block-tab-child",{content:"Tab 1",tabName:"Tab 1",tabIndex:0}],["lu/block-tab-child",{content:"Tab 2",tabName:"Tab 2",tabIndex:1}],["lu/block-tab-child",{content:"Tab 3",tabName:"Tab 3",tabIndex:2}]];return wp.element.createElement("div",{id:c,className:"tabSection"},wp.element.createElement("div",{className:"tabContainer","data-tab-active":o},r.map(function(e,n){return wp.element.createElement("div",{key:n,className:"tabInner",style:e.isActive?{alignSelf:"initial"}:{alignSelf:"flex-end"}},e.isActive&&wp.element.createElement("div",{className:"imageHolder"},n>0&&wp.element.createElement("div",{className:"editIcon editorIcon",onClick:function(){return t.moveLeft(e,n)}},"<"),Object.keys(r).length-1!==n&&wp.element.createElement("div",{className:"editIcon editorIcon",onClick:function(){return t.moveRight(e,n)}},">")),wp.element.createElement("div",{className:"tabHolder"},wp.element.createElement(h,{key:n,tagName:"div",placeholder:__("Tab Title"),value:e.text,unstableOnFocus:function(){return a({currentTab:1+n})},onChange:function(e){return t.handleTabTextChange(e,n)},onClick:function(){return t.handleTabClick(e,n)},className:e.isActive?"tab-title-text active":"tab-title-text",style:e.isActive&&{color:i,borderBottomColor:{activeColor:i}},keepPlaceholderOnFocus:!0,"data-tab":e.dataTab,"data-tab-index":n}),e.isActive&&wp.element.createElement("div",{className:"editIcon",onClick:function(){return t.deleteTab(n)}},"\ud83d\uddd1")))}),wp.element.createElement("div",{className:"editIcon add",onClick:this.addTab},"+")),wp.element.createElement(g,{template:l,allowedBlocks:["lu/block-tab-child"],renderAppender:!1}))}}]),e}(b);m("lu/block-tab-parent",{title:__("Tab Layout"),icon:"menu",category:"common",keywords:[__("Tab layout"),__("Tab")],attributes:{tabs:{type:"array",default:[{text:__("Tab 1"),anchor:"",dataTab:__("Tab 1"),isActive:!0},{text:__("Tab 2"),anchor:"",dataTab:__("Tab 2"),isActive:!1},{text:__("Tab 3"),anchor:"",dataTab:__("Tab 3"),isActive:!1}]},dataTabActive:{type:"string",default:"Tab 1"},activeColor:{type:"string",default:"#cd092d"},contentBackgroundColor:{type:"string",default:"#F7F7F7"},verticalPadding:{type:"integer",default:80},sectionID:{type:"string",default:null}},providesContext:{"block-tab-parent/contentBackgroundColor":"contentBackgroundColor","block-tab-parent/verticalPadding":"verticalPadding"},edit:w,save:function(t){var e=t.attributes,a=e.tabs,n=e.activeColor,r=e.sectionID,o=".tab-title-text.active {\n\t\t\t\t\t\tcolor: "+n+";\n\t\t\t\t\t\tborder-bottom-color: "+n+";\n\t\t\t\t\t}";return wp.element.createElement("div",{id:r,className:"tabSection"},wp.element.createElement("style",null,o),wp.element.createElement("div",{className:"tabContainer","data-tab-active":"Tab 1","data-tab-color":n},a.map(function(t,e){return wp.element.createElement(h.Content,{key:e,tagName:"div",value:t.text,className:0===e?"tab-title-text active":"tab-title-text","data-tab":t.dataTab,"data-tab-index":e})})),wp.element.createElement(g.Content,null))}}),f("blocks.registerBlockType","lu/block-tab-parent",c),m("lu/block-tab-child",{title:__("Tab"),icon:"menu",category:"common",parent:"lu/block-tab-parent",attributes:{tabName:{type:"string",default:""},tabIndex:{type:"integer",default:-1},isActive:{type:"boolean",default:!1},contentBackgroundColor:{type:"string",default:null},verticalPadding:{type:"integer",default:null}},usesContext:["block-tab-parent/contentBackgroundColor","block-tab-parent/verticalPadding"],edit:function(t){var e=t.attributes,a=t.setAttributes,n=e.tabName,r=e.tabIndex,o=e.isActive,i=e.contentBackgroundColor,c=e.verticalPadding,l=t.context["block-tab-parent/contentBackgroundColor"],s=t.context["block-tab-parent/verticalPadding"];i!==l&&a({contentBackgroundColor:l}),c!==s&&a({verticalPadding:s});var d=[["core/paragraph",{value:"Lorem ipsum dolor sit amet"}]];return wp.element.createElement("div",{"data-tab":n,"data-tab-index":r,className:o?"tab-content active":"tab-content",style:{backgroundColor:i,paddingTop:c,paddingBottom:c}},wp.element.createElement("div",{className:"contentContainer"},wp.element.createElement(g,{template:d,templateLock:!1,renderAppender:function(){return wp.element.createElement(g.ButtonBlockAppender,null)}})))},save:function(t){var e=t.attributes,a=e.tabName,n=e.tabIndex,r=e.contentBackgroundColor,o=e.verticalPadding;return wp.element.createElement("div",{className:"tab-content","data-tab":a,"data-tab-index":n,style:{backgroundColor:r,paddingTop:o,paddingBottom:o}},wp.element.createElement("div",{className:"contentContainer"},wp.element.createElement(g.Content,null)))}}),f("blocks.registerBlockType","lu/block-tab-child",c)},function(t,e){},function(t,e){}]);